--- Source/cmake/FindLLVM.cmake.orig	2015-06-13 09:20:59.561053522 -0700
+++ Source/cmake/FindLLVM.cmake	2015-06-13 09:23:50.886448652 -0700
@@ -12,12 +12,18 @@
 execute_process(COMMAND ${LLVM_CONFIG_EXE} --version OUTPUT_VARIABLE LLVM_VERSION OUTPUT_STRIP_TRAILING_WHITESPACE)
 execute_process(COMMAND ${LLVM_CONFIG_EXE} --includedir OUTPUT_VARIABLE LLVM_INCLUDE_DIRS OUTPUT_STRIP_TRAILING_WHITESPACE)
 execute_process(COMMAND ${LLVM_CONFIG_EXE} --libfiles OUTPUT_VARIABLE LLVM_STATIC_LIBRARIES OUTPUT_STRIP_TRAILING_WHITESPACE)
+#execute_process(COMMAND ${LLVM_CONFIG_EXE} --ldflags OUTPUT_VARIABLE LLVM_LDFLAGS OUTPUT_STRIP_TRAILING_WHITESPACE)
+set(LLVM_LDFLAGS " ")
+execute_process(COMMAND ${LLVM_CONFIG_EXE} --system-libs OUTPUT_VARIABLE LLVM_SYSTEM_LIBS OUTPUT_STRIP_TRAILING_WHITESPACE)
+execute_process(COMMAND ${LLVM_CONFIG_EXE} --ldflags COMMAND sed -r -e "s|-L||g" OUTPUT_VARIABLE _LLVM_LIB_PATH OUTPUT_STRIP_TRAILING_WHITESPACE)
+execute_process(COMMAND ${LLVM_CONFIG_EXE} --libfiles COMMAND sed -r -e "s|${_LLVM_LIB_PATH}|${CMAKE_LIBRARY_PATH}|g" OUTPUT_VARIABLE LLVM_STATIC_LIBRARIES OUTPUT_STRIP_TRAILING_WHITESPACE)
 
 # convert the list of paths into a cmake list
 separate_arguments(LLVM_STATIC_LIBRARIES)
+string(REPLACE " " " " LLVM_STATIC_LIBRARIES "${LLVM_STATIC_LIBRARIES}")
 
 include(FindPackageHandleStandardArgs)
 find_package_handle_standard_args(LLVM DEFAULT_MSG
-                                  LLVM_VERSION LLVM_INCLUDE_DIRS LLVM_STATIC_LIBRARIES)
+                                  LLVM_VERSION LLVM_INCLUDE_DIRS LLVM_LDFLAGS LLVM_SYSTEM_LIBS LLVM_STATIC_LIBRARIES)
 
-mark_as_advanced(LLVM_VERSION LLVM_INCLUDE_DIRS LLVM_STATIC_LIBRARIES)
+mark_as_advanced(LLVM_VERSION LLVM_INCLUDE_DIRS LLVM_LDFLAGS LLVM_SYSTEM_LIBS LLVM_STATIC_LIBRARIES)
